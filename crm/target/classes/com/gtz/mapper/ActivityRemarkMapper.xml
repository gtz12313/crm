<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace属性 设置mapper接口的全类名 -->
<mapper namespace="com.gtz.dao.ActivityRemarkDao">

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Oct 31 14:13:10 CST 2020.
        -->
        id, note_content, create_time, create_by, edit_time, edit_by, edit_flag, activity_id
    </sql>

    <select id="selectActivityRemarkByActivityId" resultType="activityRemark">
        select ar.id,
               ar.note_content,
               ar.create_time,
               u.`name`  create_by,
               ar.edit_time,
               u1.`name` edit_by,
               ar.edit_flag,
               ar.activity_id
        FROM t_activity_remark ar
                 JOIN t_user u ON u.id = ar.create_by
                 LEFT JOIN t_user u1 ON u1.id = ar.edit_by
        where ar.activity_id = #{activityId}
        order by ar.create_time
    </select>

    <select id="selectActivityRemarkById" resultType="activityRemark">
        select
        <include refid="Base_Column_List"></include>
        from t_activity_remark
        where id = #{id}
    </select>

    <insert id="insertActivityRemark" parameterType="activityRemark">
        insert into t_activity_remark
        values (#{id}, #{noteContent},
                #{createTime}, #{createBy},
                #{editTime}, #{editBy},
                #{editFlag}, #{activityId})
    </insert>

    <update id="updateActivityRemark">
        update t_activity_remark
        set note_content = #{noteContent},
            edit_time    = #{editTime},
            edit_by      = #{editBy},
            edit_flag    = #{editFlag}
        where id = #{id}
    </update>

    <delete id="deleteActivityRemarkById">
        delete
        from t_activity_remark
        where id = #{id}
    </delete>
</mapper>